#!/bin/bash

[ "$UID" -eq 0 ] || exec sudo bash "$0" "$@"

# Get the current directory
DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

# Change to the current directory
cd "$DIR"

# Include global functions
. "$DIR/src/functions"

# Header
log_info "Starting update..."

# Stop running containers
./stop

log_status "Fetching changes from the repository..."
git fetch

log_status "Pulling all changes..."
git pull

log_status "Forcing intallation for update..."
./install

cd -
log_info "Use the './start' command to start the updated container."
log_success "Update finished!"
echo
